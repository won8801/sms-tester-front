<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>관리자 페이지</title>
</head>
<body>
  <h2>🛠 관리자 설정</h2>

  <h3>1. 사용자 생성</h3>
  <input id="newId" placeholder="아이디" />
  <input id="newPw" placeholder="비밀번호" type="password" />
  <input id="newLimit" type="number" placeholder="테스트 가능 횟수" />
  <button onclick="addUser()">추가</button>

  <h3>2. 전화번호 설정</h3>
  <input id="sk" placeholder="SK 번호" />
  <input id="kt" placeholder="KT 번호" />
  <input id="lg" placeholder="LG 번호" />
  <button onclick="savePhones()">저장</button>

  <h3>3. 사용자 목록</h3>
  <ul id="userList"></ul>

  <script>
    const users = JSON.parse(localStorage.getItem("users") || "[]");

    function addUser() {
      const id = newId.value;
      const pw = newPw.value;
      const limit = parseInt(newLimit.value);
      if (id && pw) {
        users.push({ id, pw, limit });
        localStorage.setItem("users", JSON.stringify(users));
        renderList();
      }
    }

    function savePhones() {
      const phoneMap = {
        sk: document.getElementById("sk").value,
        kt: document.getElementById("kt").value,
        lg: document.getElementById("lg").value
      };
      localStorage.setItem("phoneMap", JSON.stringify(phoneMap));
      alert("전화번호 저장 완료");
    }

    function renderList() {
      userList.innerHTML = "";
      users.forEach((u, idx) => {
        const li = document.createElement("li");
        li.textContent = `${u.id} (${u.limit}회) `;
        const del = document.createElement("button");
        del.textContent = "삭제";
        del.onclick = () => {
          users.splice(idx, 1);
          localStorage.setItem("users", JSON.stringify(users));
          renderList();
        };
        li.appendChild(del);
        userList.appendChild(li);
      });
    }

    renderList();
  </script>
</body>
</html>
